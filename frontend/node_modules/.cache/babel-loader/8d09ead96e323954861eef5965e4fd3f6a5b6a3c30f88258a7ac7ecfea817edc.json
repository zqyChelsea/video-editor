{"ast":null,"code":"var _jsxFileName = \"D:\\\\projects\\\\video-editor\\\\frontend\\\\src\\\\pages\\\\HistoryPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction HistoryPage() {\n  _s();\n  const [files, setFiles] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const navigate = useNavigate();\n  useEffect(() => {\n    fetchFiles();\n  }, []);\n  const fetchFiles = async () => {\n    try {\n      const response = await fetch('http://localhost:5000/api/files');\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      const data = await response.json();\n      setFiles(data);\n    } catch (error) {\n      console.error('获取文件列表失败:', error);\n      setError(error.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const formatDate = dateString => {\n    return new Date(dateString).toLocaleString('zh-CN');\n  };\n  const viewScript = file => {\n    navigate('/script-editor', {\n      state: {\n        script: file.script,\n        pptContent: null,\n        // 如果需要的话，可以从数据库中获取\n        outline: file.outline\n      }\n    });\n  };\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"loading\",\n    children: \"\\u52A0\\u8F7D\\u4E2D...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 25\n  }, this);\n  if (error) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"error\",\n    children: [\"\\u9519\\u8BEF: \", error]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 23\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"history-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"\\u751F\\u6210\\u5386\\u53F2\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"files-list\",\n      children: files.map(file => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"file-item\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"file-info\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: file.original_name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 54,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"\\u521B\\u5EFA\\u65F6\\u95F4: \", formatDate(file.created_at)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 55,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"\\u72B6\\u6001: \", file.status]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"file-actions\",\n          children: file.script && /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => viewScript(file),\n            className: \"view-script-btn\",\n            children: \"\\u67E5\\u770B\\u811A\\u672C\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 33\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 25\n        }, this)]\n      }, file.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 9\n  }, this);\n}\n_s(HistoryPage, \"Hur2z1EmsInPBD/M+KHYthOTlNA=\", false, function () {\n  return [useNavigate];\n});\n_c = HistoryPage;\nexport default HistoryPage;\nvar _c;\n$RefreshReg$(_c, \"HistoryPage\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","jsxDEV","_jsxDEV","HistoryPage","_s","files","setFiles","loading","setLoading","error","setError","navigate","fetchFiles","response","fetch","ok","Error","status","data","json","console","message","formatDate","dateString","Date","toLocaleString","viewScript","file","state","script","pptContent","outline","className","children","fileName","_jsxFileName","lineNumber","columnNumber","map","original_name","created_at","onClick","id","_c","$RefreshReg$"],"sources":["D:/projects/video-editor/frontend/src/pages/HistoryPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nfunction HistoryPage() {\r\n    const [files, setFiles] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState(null);\r\n    const navigate = useNavigate();\r\n\r\n    useEffect(() => {\r\n        fetchFiles();\r\n    }, []);\r\n\r\n    const fetchFiles = async () => {\r\n        try {\r\n            const response = await fetch('http://localhost:5000/api/files');\r\n            if (!response.ok) {\r\n                throw new Error(`HTTP error! status: ${response.status}`);\r\n            }\r\n            const data = await response.json();\r\n            setFiles(data);\r\n        } catch (error) {\r\n            console.error('获取文件列表失败:', error);\r\n            setError(error.message);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const formatDate = (dateString) => {\r\n        return new Date(dateString).toLocaleString('zh-CN');\r\n    };\r\n\r\n    const viewScript = (file) => {\r\n        navigate('/script-editor', {\r\n            state: {\r\n                script: file.script,\r\n                pptContent: null, // 如果需要的话，可以从数据库中获取\r\n                outline: file.outline\r\n            }\r\n        });\r\n    };\r\n\r\n    if (loading) return <div className=\"loading\">加载中...</div>;\r\n    if (error) return <div className=\"error\">错误: {error}</div>;\r\n\r\n    return (\r\n        <div className=\"history-container\">\r\n            <h1>生成历史</h1>\r\n            <div className=\"files-list\">\r\n                {files.map((file) => (\r\n                    <div key={file.id} className=\"file-item\">\r\n                        <div className=\"file-info\">\r\n                            <h3>{file.original_name}</h3>\r\n                            <p>创建时间: {formatDate(file.created_at)}</p>\r\n                            <p>状态: {file.status}</p>\r\n                        </div>\r\n                        <div className=\"file-actions\">\r\n                            {file.script && (\r\n                                <button \r\n                                    onClick={() => viewScript(file)}\r\n                                    className=\"view-script-btn\"\r\n                                >\r\n                                    查看脚本\r\n                                </button>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default HistoryPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}