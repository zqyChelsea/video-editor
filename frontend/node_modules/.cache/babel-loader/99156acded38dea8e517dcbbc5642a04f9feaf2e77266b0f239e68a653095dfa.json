{"ast":null,"code":"var _jsxFileName = \"D:\\\\projects\\\\video-editor\\\\frontend\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { BrowserRouter as Router, Routes, Route } from 'react-router-dom';\nimport './App.css';\n\n// 上传页面组件\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction UploadPage() {\n  _s();\n  const [file, setFile] = useState(null);\n  const [message, setMessage] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [outline, setOutline] = useState(null);\n  const [filePreview, setFilePreview] = useState(null);\n  const handleFileUpload = e => {\n    const selectedFile = e.target.files[0];\n    if (selectedFile && selectedFile.size > 10 * 1024 * 1024) {\n      setMessage('文件大小不能超过 10MB');\n      return;\n    }\n    setFile(selectedFile);\n    setMessage('');\n\n    // 根据文件类型创建不同的预览\n    if (selectedFile) {\n      if (selectedFile.type === 'application/pdf') {\n        const fileURL = URL.createObjectURL(selectedFile);\n        setFilePreview(fileURL);\n      } else {\n        // 对于 PPTX 文件，可能需要特殊处理\n        setMessage('PPTX 文件预览功能开发中');\n      }\n    }\n  };\n  const handleSubmit = async () => {\n    if (!file) {\n      setMessage('请先选择文件');\n      return;\n    }\n    setIsLoading(true);\n    const formData = new FormData();\n    formData.append('file', file);\n    try {\n      const response = await fetch('http://localhost:5000/api/upload', {\n        method: 'POST',\n        body: formData\n      });\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      const data = await response.json();\n      setMessage(data.message);\n      if (data.data && data.data.outline) {\n        setOutline(data.data.outline);\n      }\n    } catch (error) {\n      console.error('上传错误:', error);\n      setMessage('上传失败：' + error.message);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"upload-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"AI\\u89C6\\u9891\\u751F\\u6210\\u5668\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"upload-form\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        accept: \".pdf,.pptx\",\n        onChange: handleFileUpload,\n        disabled: isLoading\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleSubmit,\n        disabled: isLoading || !file,\n        children: isLoading ? '处理中...' : '上传并生成提纲'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this), message && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: `message ${message.includes('失败') ? 'error' : 'success'}`,\n      children: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 9\n    }, this), filePreview && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"preview-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\u6587\\u4EF6\\u9884\\u89C8\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"iframe\", {\n        src: filePreview,\n        title: \"\\u6587\\u4EF6\\u9884\\u89C8\",\n        className: \"file-preview\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 9\n    }, this), outline && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"outline-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\u751F\\u6210\\u7684\\u5927\\u7EB2\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"pre\", {\n        className: \"outline-content\",\n        children: JSON.stringify(outline, null, 2)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 5\n  }, this);\n}\n\n// 主应用组件\n_s(UploadPage, \"bJy3zlFhSfgLvaAJ4cQ1CDM8ybQ=\");\n_c = UploadPage;\nfunction App() {\n  return /*#__PURE__*/_jsxDEV(Router, {\n    children: /*#__PURE__*/_jsxDEV(Routes, {\n      children: /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/\",\n        element: /*#__PURE__*/_jsxDEV(UploadPage, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 34\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 117,\n    columnNumber: 5\n  }, this);\n}\n_c2 = App;\nexport default App;\nvar _c, _c2;\n$RefreshReg$(_c, \"UploadPage\");\n$RefreshReg$(_c2, \"App\");","map":{"version":3,"names":["React","useState","BrowserRouter","Router","Routes","Route","jsxDEV","_jsxDEV","UploadPage","_s","file","setFile","message","setMessage","isLoading","setIsLoading","outline","setOutline","filePreview","setFilePreview","handleFileUpload","e","selectedFile","target","files","size","type","fileURL","URL","createObjectURL","handleSubmit","formData","FormData","append","response","fetch","method","body","ok","Error","status","data","json","error","console","className","children","fileName","_jsxFileName","lineNumber","columnNumber","accept","onChange","disabled","onClick","includes","src","title","JSON","stringify","_c","App","path","element","_c2","$RefreshReg$"],"sources":["D:/projects/video-editor/frontend/src/App.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { BrowserRouter as Router, Routes, Route } from 'react-router-dom';\r\nimport './App.css';\r\n\r\n// 上传页面组件\r\nfunction UploadPage() {\r\n  const [file, setFile] = useState(null);\r\n  const [message, setMessage] = useState('');\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [outline, setOutline] = useState(null);\r\n  const [filePreview, setFilePreview] = useState(null);\r\n\r\n  const handleFileUpload = (e) => {\r\n    const selectedFile = e.target.files[0];\r\n    if (selectedFile && selectedFile.size > 10 * 1024 * 1024) {\r\n      setMessage('文件大小不能超过 10MB');\r\n      return;\r\n    }\r\n    setFile(selectedFile);\r\n    setMessage('');\r\n\r\n    // 根据文件类型创建不同的预览\r\n    if (selectedFile) {\r\n      if (selectedFile.type === 'application/pdf') {\r\n        const fileURL = URL.createObjectURL(selectedFile);\r\n        setFilePreview(fileURL);\r\n      } else {\r\n        // 对于 PPTX 文件，可能需要特殊处理\r\n        setMessage('PPTX 文件预览功能开发中');\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async () => {\r\n    if (!file) {\r\n      setMessage('请先选择文件');\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n    const formData = new FormData();\r\n    formData.append('file', file);\r\n\r\n    try {\r\n      const response = await fetch('http://localhost:5000/api/upload', {\r\n        method: 'POST',\r\n        body: formData,\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`HTTP error! status: ${response.status}`);\r\n      }\r\n\r\n      const data = await response.json();\r\n      setMessage(data.message);\r\n      \r\n      if (data.data && data.data.outline) {\r\n        setOutline(data.data.outline);\r\n      }\r\n    } catch (error) {\r\n      console.error('上传错误:', error);\r\n      setMessage('上传失败：' + error.message);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"upload-container\">\r\n      <h1>AI视频生成器</h1>\r\n      <div className=\"upload-form\">\r\n        <input \r\n          type=\"file\" \r\n          accept=\".pdf,.pptx\" \r\n          onChange={handleFileUpload}\r\n          disabled={isLoading}\r\n        />\r\n        <button \r\n          onClick={handleSubmit} \r\n          disabled={isLoading || !file}\r\n        >\r\n          {isLoading ? '处理中...' : '上传并生成提纲'}\r\n        </button>\r\n      </div>\r\n      {message && (\r\n        <p className={`message ${message.includes('失败') ? 'error' : 'success'}`}>\r\n          {message}\r\n        </p>\r\n      )}\r\n\r\n      {filePreview && (\r\n        <div className=\"preview-container\">\r\n          <h2>文件预览</h2>\r\n          <iframe \r\n            src={filePreview} \r\n            title=\"文件预览\"\r\n            className=\"file-preview\"\r\n          />\r\n        </div>\r\n      )}\r\n\r\n      {outline && (\r\n        <div className=\"outline-container\">\r\n          <h2>生成的大纲</h2>\r\n          <pre className=\"outline-content\">\r\n            {JSON.stringify(outline, null, 2)}\r\n          </pre>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n// 主应用组件\r\nfunction App() {\r\n  return (\r\n    <Router>\r\n      <Routes>\r\n        <Route path=\"/\" element={<UploadPage />} />\r\n      </Routes>\r\n    </Router>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}